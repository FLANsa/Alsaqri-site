{% extends "base.html" %}

{% block title %}لوحة التحكم المحدودة{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <div class="alert alert-info text-center">
                <h4>مرحباً {{ current_user.username }} - لوحة التحكم المحدودة</h4>
                <p>لديك صلاحيات محدودة في النظام</p>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- إضافة هاتف جديد -->
        {% if current_user.can_add_phones %}
        <div class="col-md-6 col-lg-3 mb-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-mobile-alt fa-3x text-primary mb-3"></i>
                    <h5 class="card-title">إضافة هاتف جديد</h5>
                    <p class="card-text">إضافة هاتف جديد إلى المخزون</p>
                    <a href="{{ url_for('add_new_phone') }}" class="btn btn-primary">إضافة هاتف جديد</a>
                </div>
            </div>
        </div>

        <div class="col-md-6 col-lg-3 mb-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-mobile-alt fa-3x text-warning mb-3"></i>
                    <h5 class="card-title">إضافة هاتف مستعمل</h5>
                    <p class="card-text">إضافة هاتف مستعمل إلى المخزون</p>
                    <a href="{{ url_for('add_used_phone') }}" class="btn btn-warning">إضافة هاتف مستعمل</a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- إضافة أكسسوار -->
        {% if current_user.can_add_accessories %}
        <div class="col-md-6 col-lg-3 mb-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-headphones fa-3x text-success mb-3"></i>
                    <h5 class="card-title">إضافة أكسسوار</h5>
                    <p class="card-text">إضافة أكسسوارات ومستلزمات</p>
                    <a href="{{ url_for('add_accessory') }}" class="btn btn-success">إضافة أكسسوار</a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- إنشاء عملية بيع -->
        {% if current_user.can_create_sales %}
        <div class="col-md-6 col-lg-3 mb-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-shopping-cart fa-3x text-info mb-3"></i>
                    <h5 class="card-title">إنشاء عملية بيع</h5>
                    <p class="card-text">إنشاء عملية بيع جديدة</p>
                    <a href="{{ url_for('create_sale_page') }}" class="btn btn-info">إنشاء بيع</a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- البحث -->
        <div class="col-md-6 col-lg-3 mb-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-search fa-3x text-secondary mb-3"></i>
                    <h5 class="card-title">البحث</h5>
                    <p class="card-text">البحث في الهواتف والأكسسوارات</p>
                    <a href="{{ url_for('search') }}" class="btn btn-secondary">البحث</a>
                </div>
            </div>
        </div>

        <!-- طباعة الباركود -->
        <div class="col-md-6 col-lg-3 mb-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-barcode fa-3x text-dark mb-3"></i>
                    <h5 class="card-title">طباعة الباركود</h5>
                    <p class="card-text">طباعة باركود للهواتف</p>
                    <a href="{{ url_for('search') }}" class="btn btn-dark">طباعة باركود</a>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5>الصلاحيات المتاحة لك:</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        {% if current_user.can_add_phones %}
                        <li class="list-group-item">
                            <i class="fas fa-check text-success"></i> إضافة هواتف جديدة ومستعملة
                        </li>
                        {% endif %}
                        {% if current_user.can_add_accessories %}
                        <li class="list-group-item">
                            <i class="fas fa-check text-success"></i> إضافة أكسسوارات ومستلزمات
                        </li>
                        {% endif %}
                        {% if current_user.can_create_sales %}
                        <li class="list-group-item">
                            <i class="fas fa-check text-success"></i> إنشاء عمليات بيع
                        </li>
                        {% endif %}
                        <li class="list-group-item">
                            <i class="fas fa-check text-success"></i> البحث في المخزون
                        </li>
                        <li class="list-group-item">
                            <i class="fas fa-check text-success"></i> طباعة الباركود
                        </li>
                        <li class="list-group-item text-muted">
                            <i class="fas fa-times text-danger"></i> الوصول إلى لوحة التحكم الكاملة
                        </li>
                        {% if not current_user.can_view_reports %}
                        <li class="list-group-item text-muted">
                            <i class="fas fa-times text-danger"></i> عرض التقارير والإحصائيات
                        </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12 text-center">
            <a href="{{ url_for('logout') }}" class="btn btn-outline-danger">
                <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
            </a>
        </div>
    </div>
</div>
{% endblock %}
